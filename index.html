<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼ è¯´ä¹‹ä¸‹æ”»ç•¥ç«™ - Undertale & Deltarune</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="js/includes.js"></script>
</head>
<body>
    <script>
        initPage('ä¼ è¯´ä¹‹ä¸‹æ”»ç•¥ç«™ - Undertale & Deltarune', 'home');
    </script>

    <!-- ä¸»é¡µå†…å®¹ -->
    <main class="main-content">
        <!-- ä¸ªäººä¿¡æ¯åŒºåŸŸ - å¤´åƒå’Œåç§° -->
        <section class="profile-section">
            <div class="container">
                <div class="profile-card">
                    <div class="profile-avatar">
                        <img src="imgs/avatar.jpg" alt="å¤´åƒ">
                    </div>
                    <div class="profile-name-container">
                        <h3 class="profile-name">Frisk</h3>
                        <p class="profile-douyin">æŠ–éŸ³å·ï¼šcszxywj</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- æ›´æ–°é¢„å‘ŠåŒºåŸŸ -->
        <section class="update-section">
            <div class="container">
                <div class="update-card">
                    <div id="notifications-container"></div>
                    
                    <div class="profileé¢„å‘Š">
                        <h4>ğŸ“¢ æ›´æ–°é¢„å‘Š</h4>
                        <div class="update-subcard">
                            <h5 class="update-title">ä¸‰è§’ç¬¦æ–‡ç¬¬å››ç«  p1 æ”»ç•¥</h5>
                            <p class="update-time" data-status="pending">æ›´æ–°æ—¶é—´å¾…å®š</p>
                            <p class="update-countdown" id="countdown-timer">æ­£åœ¨è®¡ç®—...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <script>
            // åŠ¨æ€è®¡ç®—å€’è®¡æ—¶
            function updateCountdown() {
                // æ£€æŸ¥æ›´æ–°æ—¶é—´çŠ¶æ€
                const updateTimeElement = document.querySelector('.update-time');
                const countdownElement = document.getElementById('countdown-timer');
                
                // å¦‚æœæ˜¯å¾…å®šçŠ¶æ€ï¼Œåˆ™éšè—å€’è®¡æ—¶
                if (updateTimeElement && updateTimeElement.dataset.status === 'pending') {
                    countdownElement.style.display = 'none';
                    return;
                }
                
                // ä»å…¨å±€updatePreviewDataè·å–ä¸‹æ¬¡æ›´æ–°æ—¶é—´
                if (typeof updatePreviewData !== 'undefined' && updatePreviewData.time && updatePreviewData.time !== 'pending') {
                    const nextUpdateTime = new Date(updatePreviewData.time).getTime();
                    const now = new Date().getTime();
                    const timeRemaining = nextUpdateTime - now;

                    if (timeRemaining <= 0) {
                        document.getElementById('countdown-timer').innerHTML = 'è§†é¢‘å·²æ›´æ–°ï¼';
                        return;
                    }

                    // è®¡ç®—å¤©ã€æ—¶ã€åˆ†ã€ç§’
                    const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

                    // æ ¼å¼åŒ–æ˜¾ç¤º
                    const countdownString = `å‰© ${days} å¤© ${hours} æ—¶ ${minutes} åˆ† ${seconds} ç§’`;
                    document.getElementById('countdown-timer').innerHTML = countdownString;
                }
            }

            // åˆå§‹è°ƒç”¨ä¸€æ¬¡
            updateCountdown();

            // æ¯ç§’æ›´æ–°ä¸€æ¬¡
            setInterval(updateCountdown, 1000);
        </script>

        <!-- çƒ­é—¨è§†é¢‘åŒºåŸŸ -->
        <section class="popular-videos">
            <div class="container">
                <h2 class="section-title">ä¸ºä½ æ¨è</h2>
                <div class="no-videos">
                    <p>æš‚æ— æ¨èè§†é¢‘</p>
                </div>
            </div>
        </section>
    </main>

    <!-- è­¦å‘Šæ¨¡æ€æ¡† -->
    <div id="custom-confirm" class="custom-confirm-modal">
        <div class="custom-confirm-overlay"></div>
        <div class="custom-confirm-content">
            <div class="custom-confirm-title">è­¦å‘Š</div>
            <div class="custom-confirm-message">æ­¤è§†é¢‘åŒ…å«å‰§é€å†…å®¹ï¼</div>
            <div class="custom-confirm-buttons">
                <button id="confirm-cancel" class="custom-confirm-btn custom-confirm-cancel">å–æ¶ˆ</button>
                <button id="confirm-ok" class="custom-confirm-btn custom-confirm-ok">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>